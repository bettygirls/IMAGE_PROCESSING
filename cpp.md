#### cpp文件是怎么运行起来的
cpp文件是源文件，存放的程序的源代码
（1）.cpp文件先进行预处理，将#include的头文件里的内容合并到源代码中，将#define宏定义的内容进行数据替换，加载外部的代码等等。
（2）.编译器对预处理后的文件进行编译，把源文件中的以文本形式存在的代码翻译成机器语言形式的目标文件，在这个过程中编译器会进行一系列的词法分析，语法分析，分析成功之后会把.cpp文件转变为.obj文件
（3）.在编译器把所有的.cpp文件都转变成.obj文件后，链接器把所有的静态链接库（.lib）文件和所有的.obj文件链接起来形成.exe文件，最后运行.exe文件并在过程中会加载动态链接库（.dll）

```
.o 是目标文件，相当于windows中的.obj文件
.so是共享库，shared object,用于动态链接的，和dll差不多
.a是静态库，是好多个.o合在一起，用于动态链接的
.la 为libtool自动生成的一些共享库
```

+ 动态链接库和静态链接库的区别
```
1 静态连接库就是把(lib)文件中用到的函数代码直接链接进目标程序，程序运行的时候不再需要其它的库文件；

动态链接就是把调用的函数所在文件模块（DLL）和调用函数在文件中的位置等信息链接进目标程序，
程序运行的时候再从DLL中寻找相应函数代码，因此需要相应DLL文件的支持。

2 静态链接库与动态链接库都是共享代码的方式，如果采用静态链接库，则无论你愿不愿意，lib 中的指令都全部被直接包含在最终生成的 EXE 文件中了。

但是若使用 DLL，该 DLL 不必被包含在最终 EXE 文件中，EXE 文件执行时可以“动态”地引用和卸载这个与 EXE 独立的 DLL 文件。

3 静态链接库和动态链接库的另外一个区别在于静态链接库中不能再包含其他的动态链接库或者静态库，而在动态链接库中还可以再包含其他的动态或静态链接库。
 动态库就是在需要调用其中的函数时，根据函数映射表找到该函数然后调入堆栈执行。

如果在当前工程中有多处对dll文件中同一个函数的调用，那么执行时，这个函数只会留下一份拷贝。
但是如果有多处对lib文件中同一个函数的调用，那么执行时，该函数将在当前程序的执行空间里留下多份拷贝，而且是一处调用就产生一份拷贝。

4 静态链接库 lib.h lib.cpp
  动态链接库需要开发者生成的.lib文件或者.dll文件，或者只提供.dll文件
  dll内部分为2种函数：
  （1）外部函数，可供应用程序调用
  （2）dll内部函数，只能在dll程序使用，应用程序无法调用它们
  
1 静态链接库的优点 
     (1) 代码装载速度快，执行速度略比动态链接库快； 
     (2) 只需保证在开发者的计算机中有正确的.LIB文件，在以二进制形式发布程序时不需考虑在用户的计算机上.LIB文件是否存在及版本问题，
     可避免DLL地狱等问题。 
2 动态链接库的优点 
     (1) 更加节省内存并减少页面交换；
     (2) DLL文件与EXE文件独立，只要输出接口不变（即名称、参数、返回值类型和调用约定不变），
         更换DLL文件不会对EXE文件造成任何影响，因而极大地提高了可维护性和可扩展性；
     (3) 不同编程语言编写的程序只要按照函数调用约定就可以调用同一个DLL函数；
     (4)适用于大规模的软件开发，使开发过程独立、耦合度小，便于不同开发者和开发组织之间进行开发和测试。
     
3 不足之处
     (1) 使用静态链接生成的可执行文件体积较大，包含相同的公共代码，造成浪费；
     (2) 使用动态链接库的应用程序不是自完备的，它依赖的DLL模块也要存在，如果使用载入时动态链接，
     程序启动时发现DLL不存在，系统将终止程序并给出错误信息。
     而使用运行时动态链接，系统不会终止，但由于DLL中的导出函数不可用，程序会加载失败；速度比静态链接慢。
     当某个模块更新后，如果新模块与旧的模块不兼容，那么那些需要该模块才能运行的软件，统统撕掉。这在早期Windows中很常见。
```
