#### 哈希

+ 一致性哈希
```
一致性哈希算法在1997年由麻省理工学院提出的一种分布式哈希（DHT）实现算法，
设计目标是为了解决因特网中的热点(Hot spot)问题，初衷和CARP十分类似。
一致性哈希修正了CARP使用的简单哈希算法带来的问题，使得分布式哈希（DHT）可以在P2P环境中真正得到应用。 
```
+ 一致性hash算法提出了在动态变化的cache环境中，判断哈希算法好坏的四个定义：
```
1、平衡性(Balance)：

平衡性是指哈希的结果能够尽可能分布到所有的缓冲中去，这样可以使得所有的缓冲空间都得到利用。
很多哈希算法都能够满足这一条件。 

2、单调性(Monotonicity)：
单调性是指如果已经有一些内容通过哈希分派到了相应的缓冲中，又有新的缓冲加入到系统中。
哈希的结果应能够保证原有已分配的内容可以被映射到原有的或者新的缓冲中去，而不会被映射到旧的缓冲集合中的其他缓冲区。 

3、分散性(Spread)：
在分布式环境中，终端有可能看不到所有的缓冲，而是只能看到其中的一部分。
当终端希望通过哈希过程将内容映射到缓冲上时，由于不同终端所见的缓冲范围有可能不同，从而导致哈希的结果不一致，
最终的结果是相同的内容被不同的终端映射到不同的缓冲区中。
这种情况显然是应该避免的，因为它导致相同内容被存储到不同缓冲中去，降低了系统存储的效率。
分散性的定义就是上述情况发生的严重程度。好的哈希算法应能够尽量避免不一致的情况发生，也就是尽量降低分散性。 

4、负载(Load)：
负载问题实际上是从另一个角度看待分散性问题。既然不同的终端可能将相同的内容映射到不同的缓冲区中，那么对于一个特定的缓冲区而言，也可能被不同的用户映射为不同的内容。与分散性一样，这种情况也是应当避免的，因此好的哈希算法应能够尽量降低缓冲的负荷。
在分布式集群中，对机器的添加删除，或者机器故障后自动脱离集群这些操作是分布式集群管理最基本的功能。
如果采用常用的hash(object)%N算法，那么在有机器添加或者删除后，很多原有的数据就无法找到了，这样严重的违反了单调性原则。接下来主要讲解一下一致性哈希算法是如何设计的。

```
+ 散列函数
```
为了避免散列函数生成的值不是均匀分布，有一个比较好的散列函数可以使用。
在该散列函数中涉及数据中所有的字符，并且一般可以分布的很好,
它计算的是0到KeySize-1进行求和Key[KeySize-i-1]*(37^i);

```
+ 装载因子
```
装载因子是指所有关键子填充哈希表后饱和的程度，它等于 关键字总数/哈希表的长度
```
+ 探测散列表的方法有
```
1 线性探测

线性探测中依次将{89， 18， 49， 58， 69} 插入散列表中
此时冲突解决办法是 f(i) = i; 设hi(x) = (s + f(i)) % tablesize

TableSize = 10
H0(89) = (89+0)%10=9
H0(18) = (18+0)%10 = 8
H0(49) = (49 + 0)%10 = 9  出现冲突  f(i)=>f(i+1), 再次散列
H1（49） = （49+1）%10 = 0


2 平方探测

线性探测中依次将{89， 18， 49， 58， 69} 插入散列表中
此时冲突解决的办法是f(i) = i*i, 设 hi(x) = (x + f(i)) % tablesize

3 双散列
双散列一般冲突解决函数 f(i) = i *hash2(x);
这又涉及到第二个散列函数hash2(x)的选择，一般我们选择hash2(x) = R - (x % R)，
其中R是小于TableSize的素数。
线性探测中依次将{89， 18， 49， 58， 69} 插入散列表中
此时冲突解决的办法是f(i) = i*hash2(x), hash2(x) = R -(x % R);
hi(x) = (hash(x) + f(i)) % tablesize = (hash(x) + i*hash2(x)) % tablesize

```
+ 哈希函数构造
构造哈希函数的目标是使得到的哈希地址尽可能均匀地分布在n个连续内存单元地址上，同时使计算过程
尽可能简单达到尽可能高的时间效率
```
1 直接定址法
直接以关键字k或者k加上某个常数(k+c) 作为哈希地址，
2 数字分析法
3 除留余数法
4 分段叠加法
5 平方取中法
6 伪随机数法

```
+ 判断性能时通常需要考虑4个因素
```
1 计算哈希函数所需要的时间
2 关键字的长度
3 关键字分布情况
4 查找频率
```

+ 计算平均查找长度
```

```

+ 解决哈希冲突的方法
```
1 开放定址法（再散列法）


```
+  哈希算法在信息安全中主要应用在？
(1)    文件校验
(2)    数字签名
(3)    鉴权协议

