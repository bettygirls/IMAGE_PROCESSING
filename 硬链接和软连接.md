#### inode文件

inode（索引）文件,每个文件都有一个唯一的inode号  

首先要弄清楚,在Linux系统中,内核为每一个新创建的文件分配一个Inode(索引结点),每个文件都有一个惟一的inode号。    

文件属性保存在索引结点里，在访问文件时，索引结点被复制到内存在，从而实现文件的快速访问。 
```
硬盘存储的最小单位是扇区  512字节
文件存取的最小单位是 块   多个扇区  4k  8个扇区

inode包含文件的元信息：
   * 文件的字节数
    * 文件拥有者的User ID
　　* 文件的Group ID
　　* 文件的读、写、执行权限
　　* 文件的时间戳，共有三个：ctime指inode上一次变动的时间，mtime指文件内容上一次变动的时间，atime指文件上一次打开的时间。
　　* 链接数，即有多少文件名指向这个inode
　　* 文件数据block的位置
stat 查看文件的inode 信息   stat a.txt

/***inode 大小***/
inode也会消耗硬盘空间，所以硬盘格式化的时候，操作系统自动将硬盘分成两个区域。
一个是数据区，存放文件数据；另一个是inode区（inode table），存放inode所包含的信息。

df -i  查看每个硬盘分区的inode总数和已经使用的数量
每个文件都必须有一个inode,inode用光但是硬盘还未存满的时候，无法在硬盘上创建新文件
df -h 查看磁盘的使用情况

/***inode号码***/
每个inode都有一个号码，操作系统用inode号码来识别不同的文件
用户通过文件名打开文件的过程： 
    1 系统找到这个文件名对应的inode号码
    2 通过inode号码获取inode信息
    3 根据inode信息找到文案进数据所在的block,读取数据

ls -i a.txt   查看文件名对应的inode号码

/***目录文件***/
目录文件的结构就是一系列目录项的列表，每个目录项： 所包含文件的文件名  + 该文件名对应的inode号码

ls /etc  只列出目录文件中的所有文件名
ls -i /etc  列出整个目录文件 包括：文件名和inode号码
ls -l /etc  列出文件的详细信息

/***inode特殊作用***/
    1. 有时，文件名包含特殊字符，无法正常删除。这时，直接删除inode节点，就能起到删除文件的作用。
　　2. 移动文件或重命名文件，只是改变文件名，不影响inode号码。
　　3. 打开一个文件以后，系统就以inode号码来识别这个文件，不再考虑文件名。因此，通常来说，系统无法从inode号码得知文件名。
      第3点使得软件更新变得简单，可以在不关闭软件的情况下进行更新，不需要重启。因为系统通过inode号码，识别运行中的文件，不通过文件名。
      更新的时候，新版文件以同样的文件名，生成一个新的inode，不会影响到运行中的文件。等到下一次运行这个软件的时候，文件名就自动指向新版文件，
      旧版文件的inode则被回收。

```

  

链接是一种在共享文件和访问它的用户的若干目录项之间建立联系的一种方法。
Linux中包括两种链接：硬链接(Hard Link)和软链接(Soft Link),软链接又称为符号链接（Symbolic link）

#### 硬链接

一个指针指向文件索引节点，系统并不为它重新分配inode，用ln命令    

硬连接是直接建立在节点表上的（inode），建立硬连接指向一个文件的时候，会更新节点表上面的计数值。

ln命令的操作结果：file1和file1hard是同一个文件的两个名字，它们具有同样的索引节点号和文件属性，建立文件file1的硬链接，
就是为file1的文件索引节点在当前目录上建立一个新指针。  

链接数同时减1，只有将所有指向文件内容的指针，也就是链接数减为0的时候，内核才会把文件内容从磁盘上删除。


```
ln[选项] 现有文件  新文件
ln[选项] 现有文件列表 目录   在目录中为现有文件列表包含的所有文件创建一个同名的硬链接
选项 ： -f 无论新文件是否存在都创建
       -n 新文件存在就不创建了
       
注意：
(1) 不可以在不同文件系统的文件间建立链接
(2) 只有超级用户才可以为目录创建硬链接
(3) Linux 系统不允许普通用户对目录作硬链接

ls -l 可以查看链接数
ln -d 让超级用户对目录做硬链接

创建目录时，默认会生成当前目录的链接和父目录的链接，所以任何一个目录的硬链接数 = 2 + 子目录（包含隐藏目录）的总数
```

#### 软链接（符号链接）
软链接克服了硬链接的不足，没有任何文件系统的限制，任何用户可以创建指向目录的符号链接，甚至可以跨越不同机器，不同网络对文件进行链接
```
ln -s 旧文件 链接文件

```
##### 软链接和硬链接的区别
+ 硬链接源文件和链接文件公用一个inode号，说明时同一个文件，而软链接有不同的inode号，说明是不同的文件
+ 在文件属性上软链接明确写出了是链接文件，而硬链接没有写出来，因为在本质上硬链接和源文件是完全平等的关系
+ 链接数目不同，软链接数目不会增加
+ 文件大小不同， 硬链接文件显示的大小和源文件是一样的，软链接显示的文件大小与源文件不同
>>  软链接就是建立了一个新文件，当访问链接文件时，系统会发现是个链接文件，读取链接文件找到真正要访问的文件
>>  软链接文件中包含原文件的路径信息，所以当源文件从一个目录下移到其他目录中，再访问链接文件，系统就找不到了，硬链接没有这个缺陷，软链接还需要系统分配
额外的空间用于建立新的索引节点和保存源文件的路径
>> 可以用symlink 查看链接文件
