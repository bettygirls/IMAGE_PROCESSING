# gcc

## 从源文件到可执行文件的生成过程

###  源文件(文本文件) ——预处理器-> 修改了的源程序（文本文件）-编译器->汇编程序(文本文件)
###  (.cpp)                           (.i)                           （.s）
###  -汇编器-> 可重定位目标程序（二进制）-链接器->可执行目标程序
###                  (.o)                         （二进制）

一个.c源程序需要经过预处理器生成.i文件，再经过编译器生成.s文件，再经过汇编器生成可重定位目标文件.o文件，
再与其他.o文件经过链接器生成最终的可执行目标程序。

#### 1.	预处理阶段。主要是处理源文件中以“#”开头的预编译指令。
          1.	删除#define并展开宏
          2.	处理所有条件预编译指令，如#if, #ifdef, #endif
          3.	插入头文件到“#include”处
          4.	删除所有注释
          5.	添加行号和文件名标识，以便编译时编译器产生调试用的行号信息
          6.	保留所有#pragma编译指令。
#### 2.	编译阶段。将预处理得到的预处理文件进行语法分析，词法分析，语义分析，优化后，生成汇编代码文件（汇编语言源程序）。
#### 3.	汇编阶段。利用汇编程序（汇编器）将汇编语言源程序转换成机器指令序列（机器语言程序）。
#### 4.	链接阶段。将多个可重定位的目标文件.o合并以生成可执行文件，其可以被加载到内存中，由系统执行。


## 参数选项

###  无选项编译链接
    gcc test.c     未指定输出文件，默认输出 a.out
###  无选项链接
    gcc test.o -o test          将编译输出文件test.o 链接成最终可执行文件test
###  -x language filename 设定文件所使用语言,使后缀名无效，对以后多个文件都起作用，直到下一个参数的使用
    gcc -x c hello.jpg
### -x non filename  关掉上一个选项，让gcc根据文件后缀名自动识别文件类型
    gcc -x c hello.jpg -x none hello2.c
### -c 只激活预处理，编译汇编
    gcc -c hello.c   生成.o的obj文件
    gcc -c test.s    将汇编输出test.s编译输出test.o文件
### -S 只激活预处理和编译
    gcc -S hello.c   生成.s 的汇编代码
    gcc -S test.i   将预处理输出文件test.i汇编成test.s文件
### -E 只激活预处理，不生成文件，可以重定向到一个输出文件查看
    gcc -E hello.c > a.txt
### -o 制定目标名称，缺省的时候，gcc编译出来的文件是a.out 

###
   -include file 包含某个代码，相当于在代码中使用#include<filename>
          gcc hello.c -include /root/level.h
   -C   在预处理的时候，不删除注释信息，一般和-E使用，有时候分析程序
   -M   生成文件关联的信息，包含目标文件所依赖的所有源代码
   -library 指定编译的时候使用的库
          gcc -lcurses hell0.c
   -Ldir  指定编译的时候，搜索库的路径，比如自己的库，可以用它指定目录，不然编译器只在标准库的目录中找
   -g    只是编译器，在编译的时候产生调试信息
   -ggdb 尽可能的生成gdb的可以使用的调试信息
   -w  不产生任何警告信息
   -Wall 生成所有警告信息
   #### 多个源文件的编译方法
          方法1：一起编译
          gcc demo1.c demo2.c -o demo 
          方法2：分别编译，一起链接
          gcc -c demo1.c
          gcc -c demo2.c
          gcc -o demo1.o demo2.o -o demo
   ### 多线程编译
          编译时加入 -lm -lpthread参数
　　      参数说明：
          -lm  使用math.h中声明的库函数还有一点特殊之处，gcc命令行必须加-lm选项，因为数学函数位于libm.so库文件中（这些库文件通常位  
          于/lib 目录下），-lm选项告诉编译器，我们程序中用到的数学函数要到这个库文件里找。
          -lpthread lpthread是表示要连接到pthread的库是这里省略的lib，你应该可以找到共享库libpthread.so的
  ### opencv 编译
          gcc demo.c -o demo `pkg-config --cflags --libs opencv`

          
          
          
          

